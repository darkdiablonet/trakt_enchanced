@import "tailwindcss";

/* Dossiers que Tailwind doit scanner (HTML + JS) */
@source "./public/**/*.html";
@source "./public/**/*.js";
@source "./lib/**/*.js";
@source "./server.js";

/* Safelist des classes uniquement togglées en JS (une seule ligne !) */
@source inline("hidden max-w-7xl mx-auto w-full max-w-none tab-btn-active text-amber-200 border-amber-400/50");

/* tes styles custom dans la couche components */
@layer components {
  :root{ --card-w:220px; }
  html, body { min-height: 100%; background-color:#020617; }
  html {
    background:
      radial-gradient(75% 120% at 10% 10%, #0f172a 0%, #020617 60%) fixed no-repeat;
    background-size: cover;
  }
  .hidden{ display:none; }
  .glass{ background:linear-gradient(180deg,rgba(15,23,42,.7),rgba(2,6,23,.7)); backdrop-filter:blur(8px); }
  .glassNoTrans{ background:linear-gradient(180deg,rgba(15, 23, 42, .9),rgba(2, 6, 23, .9)); backdrop-filter:blur(8px); }
  .btn{ display:inline-flex; align-items:center; gap:.5rem; padding:.45rem .8rem; border-radius:.75rem; background:#0ea5e9; color:#fff; font-weight:600; }
  .btn-outline{ background:transparent; border:1px solid #334155; color:#e2e8f0; }
  .chip{ display:inline-flex; align-items:center; gap:.35rem; padding:.2rem .5rem; border-radius:999px; background:#0b1220; border:1px solid #0b2942; color:#8ab4f8; font-size:.75rem; }
  .poster{ width:100%; padding-top:150%; border-radius:.75rem; background-size:cover; background-position:center; background-color:#0b1220; border:1px solid #0b2942; }
  .card{ background:linear-gradient(180deg,rgba(15,23,42,.55),rgba(2,6,23,.55)); border:1px solid #0b2942; border-radius:1rem; }
  .grid-default{ display:grid; grid-template-columns:repeat(auto-fill, minmax(var(--card-w), 1fr)); gap:1rem; }
  .app-header{ position:sticky; top:0; z-index:20; border-bottom:1px solid rgba(255,255,255,.08); background:rgba(11,18,32,.7); backdrop-filter:blur(6px); }
  .filters{ position:sticky; top:68px; z-index:10; }
  .tabs-group{ display:inline-flex; flex-wrap:wrap; gap:.25rem; padding:.25rem; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.05); }
  .tabs-group button{ padding:.5rem 1rem; border-radius:8px; font-weight:600; font-size:.9rem; color:#cbd5e1; }
  .tabs-group button:hover{ color:#fff; }
  .tab-btn-active{ background:#0ea5e9; color:#fff !important; }
  /* --- Uniquement pour "À voir" --- */
  .poster-wrap{ position:relative; }
  .badge-next{
    position:absolute; top:.5rem; right:.5rem;
    display:inline-flex; align-items:center; gap:.35rem;
    padding:.25rem .5rem; border-radius:.6rem;
    background:#0ea5e9; color:#06121f; font-weight:700; font-size:.75rem;
    box-shadow:0 6px 18px rgba(14,165,233,.25);
    border:1px solid rgba(255,255,255,.15);
  }
  .chips{ display:flex; flex-wrap:wrap; gap:.4rem; }
  .chip--warn{ border-color:rgba(251,191,36,.5); color:#fde68a; background:rgba(2,6,23,.65); }
  .poster-wrap{ position:relative; }
  .ov-btn{
    position:absolute; right:.5rem; bottom:.5rem;
    display:inline-flex; align-items:center; gap:.35rem;
    padding:.25rem .5rem; border-radius:.5rem;
    background:rgba(2,6,23,.8); border:1px solid #0b2942; color:#e2e8f0;
  }
  .ov-btn:hover{ background:rgba(2,6,23,.95); }
  /* Popover ancré */
  #ovBackdrop { background: transparent; }
  .ov-panel{
    position: fixed;        /* ancré au viewport */
    max-width: 420px;
    width: min(92vw, 420px);
    /* la "glass" existe déjà chez toi */
  }
  .ov-panel .ov-arrow{
    position: absolute;
    width: 12px; height: 12px;
    transform: rotate(45deg);
    background: rgba(15, 23, 42, 1);
    border-left: 1px solid #0b2942;
    border-top: 1px solid #0b2942;
    /* left est fixé en JS */
  }
  .ov-panel.ov-at-bottom .ov-arrow{ top: -6px; }
  .ov-panel.ov-at-top    .ov-arrow{ bottom: -6px; }
  .topcard{background:linear-gradient(180deg,rgba(15,23,42,.4),rgba(2,6,23,.4));border:1px solid #0b2942;border-radius:.75rem;padding:.5rem}
  .toplist{display:flex;flex-direction:column;gap:.25rem}
  .toplist .row{display:grid;grid-template-columns:1.75rem 1fr auto;align-items:center;gap:.5rem;padding:.45rem .5rem;border-radius:.6rem}
  .toplist .row:hover{background:rgba(14,165,233,.08)}
  .toplist .rank{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:999px;background:#0b1220;border:1px solid #0b2942;color:#8ab4f8;font-size:.75rem;font-weight:700}
  .toplist .name{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .toplist .bar{margin-top:.25rem;width:100%;height:6px;background:#0f172a;border:1px solid #0b2942;border-radius:999px;overflow:hidden}
  .toplist .bar>span{display:block;height:100%;background:#22c55e;width:var(--w,0%)}
  .chip-xs{font-size:.7rem;padding:.15rem .45rem}
}

/* (facultatif) petit fallback pour line-clamp si tu l’utilises */
.line-clamp-2{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}
